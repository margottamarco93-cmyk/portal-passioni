<!DOCTYPE html>
<html lang="it">

<head>
  <meta charset="UTF-8">
  <title>La Comunità | Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap 4 da CDN -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-GTVpQ8Hhl8fSUQGa++w33q4a0BrSsZqBany9nZAFf35eC2c7OGCsHI5DcVxKHuZk"
    crossorigin="anonymous"
  >

  <!-- Il tuo CSS personalizzato (se lo usi) -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    body {
      background: #f7f7f7;
    }
    .login-card {
      max-width: 420px;
      margin-top: 80px;
    }
  </style>
</head>


<body>

  <div class="container">
    <div class="card login-card mx-auto shadow-sm">
      <div class="card-body">

        <h3 class="mb-1 text-center">La Comunità</h3>
        <p class="mb-4 text-center text-muted">Accesso riservato ai dipendenti.</p>

        <!-- Tabs -->
        <ul class="nav nav-pills nav-justified mb-3" id="authTabs">
          <li class="nav-item">
            <a class="nav-link active" href="#" data-tab="login">Login</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" data-tab="register">Registrati</a>
          </li>
        </ul>

        <!-- LOGIN FORM -->
        <form id="login-form">
          <div class="form-group text-left">
            <label for="login-email">Email aziendale</label>
            <input type="email" class="form-control" id="login-email" placeholder="nome.cognome@azienda.it" required>
          </div>

          <div class="form-group text-left">
            <label for="login-password">Password</label>
            <input type="password" class="form-control" id="login-password" placeholder="Password" required>
          </div>

          <button type="submit" class="btn btn-primary btn-block mt-3">
            Entra
          </button>

          <p class="small text-muted mt-3 mb-0 text-center" id="login-message"></p>
        </form>

        <!-- REGISTER FORM -->
        <form id="register-form" class="d-none">
          <div class="form-group text-left">
            <label for="reg-email">Email aziendale</label>
            <input type="email" class="form-control" id="reg-email" placeholder="nome.cognome@azienda.it" required>
          </div>

          <div class="form-group text-left">
            <label for="reg-password">Password</label>
            <input type="password" class="form-control" id="reg-password" placeholder="Minimo 6 caratteri" required>
          </div>

          <div class="form-group text-left">
            <label for="reg-password2">Conferma password</label>
            <input type="password" class="form-control" id="reg-password2" placeholder="Ripeti password" required>
          </div>

          <div class="form-group text-left">
            <label for="reg-company-code">Codice aziendale</label>
            <input type="text" class="form-control" id="reg-company-code" placeholder="Es. ABC123" required>
            <small class="form-text text-muted">
              Per registrarti devi conoscere il codice aziendale.
            </small>
          </div>

          <button type="submit" class="btn btn-success btn-block mt-3">
            Crea account
          </button>

          <p class="small text-muted mt-3 mb-0 text-center" id="register-message"></p>
        </form>

      </div>
    </div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- AUTH LOGIC -->
  <script src="js/auth.js"></script>

  <!-- TAB SWITCH -->
  <script>
    document.querySelectorAll('#authTabs .nav-link').forEach(function (link) {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const tab = this.getAttribute('data-tab');

        document.querySelectorAll('#authTabs .nav-link').forEach(l => l.classList.remove('active'));
        this.classList.add('active');

        document.getElementById('login-form').classList.toggle('d-none', tab !== 'login');
        document.getElementById('register-form').classList.toggle('d-none', tab !== 'register');
      });
    });
  </script>

</body>

</html>
